function parse(a){for(var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,b=[],c=0,d=0,e="",f="/";null!=(g=PATH_REGEXP.exec(a));)h=g[0],i=g[1],j=g.index,e+=a.slice(d,j),d=j+h.length,i?e+=i[1]:(k=a[d],l=g[2],m=g[3],n=g[4],o=g[5],p=g[6],q=g[7],e&&(b.push(e),e=""),r=null!=l&&null!=k&&k!==l,s="+"===p||"*"===p,t="?"===p||"*"===p,u=g[2]||f,v=n||o,b.push({name:m||c++,prefix:l||"",delimiter:u,optional:t,repeat:s,partial:r,asterisk:!!q,pattern:v?v.replace(/([=!:$\/()])/g,"\\$1"):q?".*":"[^"+escapeString(u)+"]+?"}));return d<a.length&&(e+=a.substr(d)),e&&b.push(e),b}function escapeString(a){return a.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function regexpToRegexp(a,b){var d,c=a.source.match(/\((?!\?)/g);if(c)for(d=0;d<c.length;d++)b.push({name:d,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return a}function stringToRegexp(a,b){return tokensToRegExp(parse(a),b)}function tokensToRegExp(a,b){var d,e,f,g,h,i,c="";for(d=0;d<a.length;d++)e=a[d],"string"==typeof e?c+=escapeString(e):(f=escapeString(e.prefix),g="(?:"+e.pattern+")",b.push(e),e.repeat&&(g+="(?:"+f+g+")*"),g=e.optional?e.partial?f+"("+g+")?":"(?:"+f+"("+g+"))?":f+"("+g+")",c+=g);return h=escapeString("/"),i=c.slice(-h.length)===h,c=(i?c.slice(0,-h.length):c)+"(?:"+h+"(?=$))?"+"$",new RegExp("^"+c,"i")}function pathToRegexp(a,b){return a instanceof RegExp?regexpToRegexp(a,b):stringToRegexp(a,b)}module.exports=pathToRegexp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");